(()=>{var Ge=Object.defineProperty;var Xe=(s,e,t)=>e in s?Ge(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var K=(s,e,t)=>(Xe(s,typeof e!="symbol"?e+"":e,t),t);var O=(s,e,t)=>new Promise((i,n)=>{var r=c=>{try{a(t.next(c))}catch(f){n(f)}},o=c=>{try{a(t.throw(c))}catch(f){n(f)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(r,o);a((t=t.apply(s,e)).next())});var ae=class{constructor(e,t,i){this.eventTarget=e,this.eventName=t,this.eventOptions=i,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){let t=Ze(e);for(let i of this.bindings){if(t.immediatePropagationStopped)break;i.handleEvent(t)}}get bindings(){return Array.from(this.unorderedBindings).sort((e,t)=>{let i=e.index,n=t.index;return i<n?-1:i>n?1:0})}};function Ze(s){if("immediatePropagationStopped"in s)return s;{let{stopImmediatePropagation:e}=s;return Object.assign(s,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,e.call(this)}})}}var ce=class{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(e=>e.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(e=>e.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((e,t)=>e.concat(Array.from(t.values())),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e){this.fetchEventListenerForBinding(e).bindingDisconnected(e)}handleError(e,t,i={}){this.application.handleError(e,`Error ${t}`,i)}fetchEventListenerForBinding(e){let{eventTarget:t,eventName:i,eventOptions:n}=e;return this.fetchEventListener(t,i,n)}fetchEventListener(e,t,i){let n=this.fetchEventListenerMapForEventTarget(e),r=this.cacheKey(t,i),o=n.get(r);return o||(o=this.createEventListener(e,t,i),n.set(r,o)),o}createEventListener(e,t,i){let n=new ae(e,t,i);return this.started&&n.connect(),n}fetchEventListenerMapForEventTarget(e){let t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}cacheKey(e,t){let i=[e];return Object.keys(t).sort().forEach(n=>{i.push(`${t[n]?"":"!"}${n}`)}),i.join(":")}},Ye=/^((.+?)(@(window|document))?->)?(.+?)(#([^:]+?))(:(.+))?$/;function et(s){let t=s.trim().match(Ye)||[];return{eventTarget:tt(t[4]),eventName:t[2],eventOptions:t[9]?st(t[9]):{},identifier:t[5],methodName:t[7]}}function tt(s){if(s=="window")return window;if(s=="document")return document}function st(s){return s.split(":").reduce((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)}),{})}function it(s){if(s==window)return"window";if(s==document)return"document"}function le(s){return s.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())}function I(s){return s.charAt(0).toUpperCase()+s.slice(1)}function he(s){return s.replace(/([A-Z])/g,(e,t)=>`-${t.toLowerCase()}`)}function nt(s){return s.match(/[^\s]+/g)||[]}var ue=class{constructor(e,t,i){this.element=e,this.index=t,this.eventTarget=i.eventTarget||e,this.eventName=i.eventName||rt(e)||H("missing event name"),this.eventOptions=i.eventOptions||{},this.identifier=i.identifier||H("missing identifier"),this.methodName=i.methodName||H("missing method name")}static forToken(e){return new this(e.element,e.index,et(e.content))}toString(){let e=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${e}->${this.identifier}#${this.methodName}`}get params(){return this.eventTarget instanceof Element?this.getParamsFromEventTargetAttributes(this.eventTarget):{}}getParamsFromEventTargetAttributes(e){let t={},i=new RegExp(`^data-${this.identifier}-(.+)-param$`);return Array.from(e.attributes).forEach(({name:r,value:o})=>{let a=r.match(i),c=a&&a[1];c&&Object.assign(t,{[le(c)]:ot(o)})}),t}get eventTargetName(){return it(this.eventTarget)}},de={a:s=>"click",button:s=>"click",form:s=>"submit",details:s=>"toggle",input:s=>s.getAttribute("type")=="submit"?"click":"input",select:s=>"change",textarea:s=>"input"};function rt(s){let e=s.tagName.toLowerCase();if(e in de)return de[e](s)}function H(s){throw new Error(s)}function ot(s){try{return JSON.parse(s)}catch(e){return s}}var fe=class{constructor(e,t){this.context=e,this.action=t}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){this.willBeInvokedByEvent(e)&&this.invokeWithEvent(e)}get eventName(){return this.action.eventName}get method(){let e=this.controller[this.methodName];if(typeof e=="function")return e;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}invokeWithEvent(e){let{target:t,currentTarget:i}=e;try{let{params:n}=this.action,r=Object.assign(e,{params:n});this.method.call(this.controller,r),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:i,action:this.methodName})}catch(n){let{identifier:r,controller:o,element:a,index:c}=this,f={identifier:r,controller:o,element:a,index:c,event:e};this.context.handleError(n,`invoking action "${this.action}"`,f)}}willBeInvokedByEvent(e){let t=e.target;return this.element===t?!0:t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}},ge=class{constructor(e,t){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver(i=>this.processMutations(i))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){let e=new Set(this.matchElementsInTree());for(let t of Array.from(this.elements))e.has(t)||this.removeElement(t);for(let t of Array.from(e))this.addElement(t)}}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){e.type=="attributes"?this.processAttributeChange(e.target,e.attributeName):e.type=="childList"&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,t){let i=e;this.elements.has(i)?this.delegate.elementAttributeChanged&&this.matchElement(i)?this.delegate.elementAttributeChanged(i,t):this.removeElement(i):this.matchElement(i)&&this.addElement(i)}processRemovedNodes(e){for(let t of Array.from(e)){let i=this.elementFromNode(t);i&&this.processTree(i,this.removeElement)}}processAddedNodes(e){for(let t of Array.from(e)){let i=this.elementFromNode(t);i&&this.elementIsActive(i)&&this.processTree(i,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,t){for(let i of this.matchElementsInTree(e))t.call(this,i)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected!=this.element.isConnected?!1:this.element.contains(e)}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}},me=class{constructor(e,t,i){this.attributeName=t,this.delegate=i,this.elementObserver=new ge(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){let t=this.matchElement(e)?[e]:[],i=Array.from(e.querySelectorAll(this.selector));return t.concat(i)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}},pe=class{constructor(e,t){this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(i=>this.processMutations(i))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(let e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){let t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}refreshAttribute(e,t){let i=this.delegate.getStringMapKeyForAttribute(e);if(i!=null){this.stringMap.has(e)||this.stringMapKeyAdded(i,e);let n=this.element.getAttribute(e);if(this.stringMap.get(e)!=n&&this.stringMapValueChanged(n,i,t),n==null){let r=this.stringMap.get(e);this.stringMap.delete(e),r&&this.stringMapKeyRemoved(i,e,r)}else this.stringMap.set(e,n)}}stringMapKeyAdded(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}stringMapValueChanged(e,t,i){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,i)}stringMapKeyRemoved(e,t,i){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,i)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(e=>e.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}};function at(s,e,t){ve(s,e).add(t)}function ct(s,e,t){ve(s,e).delete(t),lt(s,e)}function ve(s,e){let t=s.get(e);return t||(t=new Set,s.set(e,t)),t}function lt(s,e){let t=s.get(e);t!=null&&t.size==0&&s.delete(e)}var _=class{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((t,i)=>t.concat(Array.from(i)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((t,i)=>t+i.size,0)}add(e,t){at(this.valuesByKey,e,t)}delete(e,t){ct(this.valuesByKey,e,t)}has(e,t){let i=this.valuesByKey.get(e);return i!=null&&i.has(t)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some(i=>i.has(e))}getValuesForKey(e){let t=this.valuesByKey.get(e);return t?Array.from(t):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter(([t,i])=>i.has(e)).map(([t,i])=>t)}};var Q=class{constructor(e,t,i){this.attributeObserver=new me(e,t,this),this.delegate=i,this.tokensByElement=new _}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){let[t,i]=this.refreshTokensForElement(e);this.tokensUnmatched(t),this.tokensMatched(i)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach(t=>this.tokenMatched(t))}tokensUnmatched(e){e.forEach(t=>this.tokenUnmatched(t))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){let t=this.tokensByElement.getValuesForKey(e),i=this.readTokensForElement(e),n=ut(t,i).findIndex(([r,o])=>!dt(r,o));return n==-1?[[],[]]:[t.slice(n),i.slice(n)]}readTokensForElement(e){let t=this.attributeName,i=e.getAttribute(t)||"";return ht(i,e,t)}};function ht(s,e,t){return s.trim().split(/\s+/).filter(i=>i.length).map((i,n)=>({element:e,attributeName:t,content:i,index:n}))}function ut(s,e){let t=Math.max(s.length,e.length);return Array.from({length:t},(i,n)=>[s[n],e[n]])}function dt(s,e){return s&&e&&s.index==e.index&&s.content==e.content}var J=class{constructor(e,t,i){this.tokenListObserver=new Q(e,t,this),this.delegate=i,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){let{element:t}=e,{value:i}=this.fetchParseResultForToken(e);i&&(this.fetchValuesByTokenForElement(t).set(e,i),this.delegate.elementMatchedValue(t,i))}tokenUnmatched(e){let{element:t}=e,{value:i}=this.fetchParseResultForToken(e);i&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,i))}fetchParseResultForToken(e){let t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}fetchValuesByTokenForElement(e){let t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(t){return{error:t}}}},be=class{constructor(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new J(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){let t=new fe(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}disconnectAction(e){let t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}disconnectAllActions(){this.bindings.forEach(e=>this.delegate.bindingDisconnected(e)),this.bindingsByAction.clear()}parseValueForToken(e){let t=ue.forToken(e);if(t.identifier==this.identifier)return t}elementMatchedValue(e,t){this.connectAction(t)}elementUnmatchedValue(e,t){this.disconnectAction(t)}},ye=class{constructor(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new pe(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap,this.invokeChangedCallbacksForDefaultValues()}start(){this.stringMapObserver.start()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,t){let i=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,i.writer(this.receiver[e]),i.writer(i.defaultValue))}stringMapValueChanged(e,t,i){let n=this.valueDescriptorNameMap[t];e!==null&&(i===null&&(i=n.writer(n.defaultValue)),this.invokeChangedCallback(t,e,i))}stringMapKeyRemoved(e,t,i){let n=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,n.writer(this.receiver[e]),i):this.invokeChangedCallback(e,n.writer(n.defaultValue),i)}invokeChangedCallbacksForDefaultValues(){for(let{key:e,name:t,defaultValue:i,writer:n}of this.valueDescriptors)i!=null&&!this.controller.data.has(e)&&this.invokeChangedCallback(t,n(i),void 0)}invokeChangedCallback(e,t,i){let n=`${e}Changed`,r=this.receiver[n];if(typeof r=="function"){let o=this.valueDescriptorNameMap[e],a=o.reader(t),c=i;i&&(c=o.reader(i)),r.call(this.receiver,a,c)}}get valueDescriptors(){let{valueDescriptorMap:e}=this;return Object.keys(e).map(t=>e[t])}get valueDescriptorNameMap(){let e={};return Object.keys(this.valueDescriptorMap).forEach(t=>{let i=this.valueDescriptorMap[t];e[i.name]=i}),e}hasValue(e){let t=this.valueDescriptorNameMap[e],i=`has${I(t.name)}`;return this.receiver[i]}},Ee=class{constructor(e,t){this.context=e,this.delegate=t,this.targetsByName=new _}start(){this.tokenListObserver||(this.tokenListObserver=new Q(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:t}){this.scope.containsElement(e)&&this.connectTarget(e,t)}tokenUnmatched({element:e,content:t}){this.disconnectTarget(e,t)}connectTarget(e,t){var i;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),(i=this.tokenListObserver)===null||i===void 0||i.pause(()=>this.delegate.targetConnected(e,t)))}disconnectTarget(e,t){var i;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),(i=this.tokenListObserver)===null||i===void 0||i.pause(()=>this.delegate.targetDisconnected(e,t)))}disconnectAllTargets(){for(let e of this.targetsByName.keys)for(let t of this.targetsByName.getValuesForKey(e))this.disconnectTarget(t,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}},we=class{constructor(e,t){this.logDebugActivity=(i,n={})=>{let{identifier:r,controller:o,element:a}=this;n=Object.assign({identifier:r,controller:o,element:a},n),this.application.logDebugActivity(this.identifier,i,n)},this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new be(this,this.dispatcher),this.valueObserver=new ye(this,this.controller),this.targetObserver=new Ee(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(i){this.handleError(i,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,t,i={}){let{identifier:n,controller:r,element:o}=this;i=Object.assign({identifier:n,controller:r,element:o},i),this.application.handleError(e,`Error ${t}`,i)}targetConnected(e,t){this.invokeControllerMethod(`${t}TargetConnected`,e)}targetDisconnected(e,t){this.invokeControllerMethod(`${t}TargetDisconnected`,e)}invokeControllerMethod(e,...t){let i=this.controller;typeof i[e]=="function"&&i[e](...t)}};function G(s,e){let t=Oe(s);return Array.from(t.reduce((i,n)=>(gt(n,e).forEach(r=>i.add(r)),i),new Set))}function ft(s,e){return Oe(s).reduce((i,n)=>(i.push(...mt(n,e)),i),[])}function Oe(s){let e=[];for(;s;)e.push(s),s=Object.getPrototypeOf(s);return e.reverse()}function gt(s,e){let t=s[e];return Array.isArray(t)?t:[]}function mt(s,e){let t=s[e];return t?Object.keys(t).map(i=>[i,t[i]]):[]}function pt(s){return vt(s,bt(s))}function vt(s,e){let t=Ot(s),i=yt(s.prototype,e);return Object.defineProperties(t.prototype,i),t}function bt(s){return G(s,"blessings").reduce((t,i)=>{let n=i(s);for(let r in n){let o=t[r]||{};t[r]=Object.assign(o,n[r])}return t},{})}function yt(s,e){return wt(e).reduce((t,i)=>{let n=Et(s,e,i);return n&&Object.assign(t,{[i]:n}),t},{})}function Et(s,e,t){let i=Object.getOwnPropertyDescriptor(s,t);if(!(i&&"value"in i)){let r=Object.getOwnPropertyDescriptor(e,t).value;return i&&(r.get=i.get||r.get,r.set=i.set||r.set),r}}var wt=(()=>typeof Object.getOwnPropertySymbols=="function"?s=>[...Object.getOwnPropertyNames(s),...Object.getOwnPropertySymbols(s)]:Object.getOwnPropertyNames)(),Ot=(()=>{function s(t){function i(){return Reflect.construct(t,arguments,new.target)}return i.prototype=Object.create(t.prototype,{constructor:{value:i}}),Reflect.setPrototypeOf(i,t),i}function e(){let i=s(function(){this.a.call(this)});return i.prototype.a=function(){},new i}try{return e(),s}catch(t){return i=>class extends i{}}})();function At(s){return{identifier:s.identifier,controllerConstructor:pt(s.controllerConstructor)}}var Ae=class{constructor(e,t){this.application=e,this.definition=At(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){let t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}disconnectContextForScope(e){let t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}fetchContextForScope(e){let t=this.contextsByScope.get(e);return t||(t=new we(this,e),this.contextsByScope.set(e,t)),t}},Te=class{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){let t=this.data.get(this.getDataKey(e))||"";return nt(t)}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}},Ce=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){let t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}set(e,t){let i=this.getAttributeNameForKey(e);return this.element.setAttribute(i,t),this.get(e)}has(e){let t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}delete(e){if(this.has(e)){let t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}else return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${he(e)}`}},xe=class{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,t,i){let n=this.warnedKeysByObject.get(e);n||(n=new Set,this.warnedKeysByObject.set(e,n)),n.has(t)||(n.add(t),this.logger.warn(i,e))}};function X(s,e){return`[${s}~="${e}"]`}var Le=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,i)=>t||this.findTarget(i)||this.findLegacyTarget(i),void 0)}findAll(...e){return e.reduce((t,i)=>[...t,...this.findAllTargets(i),...this.findAllLegacyTargets(i)],[])}findTarget(e){let t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}findAllTargets(e){let t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}getSelectorForTargetName(e){let t=this.schema.targetAttributeForScope(this.identifier);return X(t,e)}findLegacyTarget(e){let t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}findAllLegacyTargets(e){let t=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(t).map(i=>this.deprecate(i,e))}getLegacySelectorForTargetName(e){let t=`${this.identifier}.${e}`;return X(this.schema.targetAttribute,t)}deprecate(e,t){if(e){let{identifier:i}=this,n=this.schema.targetAttribute,r=this.schema.targetAttributeForScope(i);this.guide.warn(e,`target:${t}`,`Please replace ${n}="${i}.${t}" with ${r}="${t}". The ${n} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}},ke=class{constructor(e,t,i,n){this.targets=new Le(this),this.classes=new Te(this),this.data=new Ce(this),this.containsElement=r=>r.closest(this.controllerSelector)===this.element,this.schema=e,this.element=t,this.identifier=i,this.guide=new xe(n)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return X(this.schema.controllerAttribute,this.identifier)}},Me=class{constructor(e,t,i){this.element=e,this.schema=t,this.delegate=i,this.valueListObserver=new J(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){let{element:t,content:i}=e,n=this.fetchScopesByIdentifierForElement(t),r=n.get(i);return r||(r=this.delegate.createScopeForElementAndIdentifier(t,i),n.set(i,r)),r}elementMatchedValue(e,t){let i=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,i),i==1&&this.delegate.scopeConnected(t)}elementUnmatchedValue(e,t){let i=this.scopeReferenceCounts.get(t);i&&(this.scopeReferenceCounts.set(t,i-1),i==1&&this.delegate.scopeDisconnected(t))}fetchScopesByIdentifierForElement(e){let t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}},Ne=class{constructor(e){this.application=e,this.scopeObserver=new Me(this.element,this.schema,this),this.scopesByIdentifier=new _,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((e,t)=>e.concat(t.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);let t=new Ae(this.application,e);this.connectModule(t)}unloadIdentifier(e){let t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}getContextForElementAndIdentifier(e,t){let i=this.modulesByIdentifier.get(t);if(i)return i.contexts.find(n=>n.element==e)}handleError(e,t,i){this.application.handleError(e,t,i)}createScopeForElementAndIdentifier(e,t){return new ke(this.schema,e,t,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(i=>e.connectContextForScope(i))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(i=>e.disconnectContextForScope(i))}},Tt={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:s=>`data-${s}-target`},B=class{constructor(e=document.documentElement,t=Tt){this.logger=console,this.debug=!1,this.logDebugActivity=(i,n,r={})=>{this.debug&&this.logFormattedMessage(i,n,r)},this.element=e,this.schema=t,this.dispatcher=new ce(this),this.router=new Ne(this)}static start(e,t){let i=new B(e,t);return i.start(),i}start(){return O(this,null,function*(){yield Ct(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")})}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(e,t){t.shouldLoad&&this.load({identifier:e,controllerConstructor:t})}load(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(n=>this.router.loadDefinition(n))}unload(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(n=>this.router.unloadIdentifier(n))}get controllers(){return this.router.contexts.map(e=>e.controller)}getControllerForElementAndIdentifier(e,t){let i=this.router.getContextForElementAndIdentifier(e,t);return i?i.controller:null}handleError(e,t,i){var n;this.logger.error(`%s

%o

%o`,t,e,i),(n=window.onerror)===null||n===void 0||n.call(window,t,"",0,0,e)}logFormattedMessage(e,t,i={}){i=Object.assign({application:this},i),this.logger.groupCollapsed(`${e} #${t}`),this.logger.log("details:",Object.assign({},i)),this.logger.groupEnd()}};function Ct(){return new Promise(s=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>s()):s()})}function xt(s){return G(s,"classes").reduce((t,i)=>Object.assign(t,Lt(i)),{})}function Lt(s){return{[`${s}Class`]:{get(){let{classes:e}=this;if(e.has(s))return e.get(s);{let t=e.getAttributeName(s);throw new Error(`Missing attribute "${t}"`)}}},[`${s}Classes`]:{get(){return this.classes.getAll(s)}},[`has${I(s)}Class`]:{get(){return this.classes.has(s)}}}}function kt(s){return G(s,"targets").reduce((t,i)=>Object.assign(t,Mt(i)),{})}function Mt(s){return{[`${s}Target`]:{get(){let e=this.targets.find(s);if(e)return e;throw new Error(`Missing target element "${s}" for "${this.identifier}" controller`)}},[`${s}Targets`]:{get(){return this.targets.findAll(s)}},[`has${I(s)}Target`]:{get(){return this.targets.has(s)}}}}function Nt(s){let e=ft(s,"values"),t={valueDescriptorMap:{get(){return e.reduce((i,n)=>{let r=Fe(n),o=this.data.getAttributeNameForKey(r.key);return Object.assign(i,{[o]:r})},{})}}};return e.reduce((i,n)=>Object.assign(i,Ft(n)),t)}function Ft(s){let e=Fe(s),{key:t,name:i,reader:n,writer:r}=e;return{[i]:{get(){let o=this.data.get(t);return o!==null?n(o):e.defaultValue},set(o){o===void 0?this.data.delete(t):this.data.set(t,r(o))}},[`has${I(i)}`]:{get(){return this.data.has(t)||e.hasCustomDefaultValue}}}}function Fe([s,e]){return Dt(s,e)}function Z(s){switch(s){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function Y(s){switch(typeof s){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(s))return"array";if(Object.prototype.toString.call(s)==="[object Object]")return"object"}function Bt(s){let e=Z(s.type);if(e){let t=Y(s.default);if(e!==t)throw new Error(`Type "${e}" must match the type of the default value. Given default value: "${s.default}" as "${t}"`);return e}}function jt(s){let e=Bt(s),t=Y(s),i=Z(s),n=e||t||i;if(n)return n;throw new Error(`Unknown value type "${s}"`)}function Vt(s){let e=Z(s);if(e)return St[e];let t=s.default;return t!==void 0?t:s}function Dt(s,e){let t=`${he(s)}-value`,i=jt(e);return{type:i,key:t,name:le(t),get defaultValue(){return Vt(e)},get hasCustomDefaultValue(){return Y(e)!==void 0},reader:$t[i],writer:Be[i]||Be.default}}var St={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},$t={array(s){let e=JSON.parse(s);if(!Array.isArray(e))throw new TypeError("Expected array");return e},boolean(s){return!(s=="0"||s=="false")},number(s){return Number(s)},object(s){let e=JSON.parse(s);if(e===null||typeof e!="object"||Array.isArray(e))throw new TypeError("Expected object");return e},string(s){return s}},Be={default:Pt,array:je,object:je};function je(s){return JSON.stringify(s)}function Pt(s){return`${s}`}var w=class{constructor(e){this.context=e}static get shouldLoad(){return!0}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:i={},prefix:n=this.identifier,bubbles:r=!0,cancelable:o=!0}={}){let a=n?`${n}:${e}`:e,c=new CustomEvent(a,{detail:i,bubbles:r,cancelable:o});return t.dispatchEvent(c),c}};w.blessings=[xt,kt,Nt];w.targets=[];w.values={};var j=B.start();j.debug=!1;window.Stimulus=j;var ee=typeof navigator!="undefined"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function te(s,e,t){s.addEventListener?s.addEventListener(e,t,!1):s.attachEvent&&s.attachEvent("on".concat(e),function(){t(window.event)})}function Ve(s,e){for(var t=e.slice(0,e.length-1),i=0;i<t.length;i++)t[i]=s[t[i].toLowerCase()];return t}function De(s){typeof s!="string"&&(s=""),s=s.replace(/\s/g,"");for(var e=s.split(","),t=e.lastIndexOf("");t>=0;)e[t-1]+=",",e.splice(t,1),t=e.lastIndexOf("");return e}function Kt(s,e){for(var t=s.length>=e.length?s:e,i=s.length>=e.length?e:s,n=!0,r=0;r<t.length;r++)i.indexOf(t[r])===-1&&(n=!1);return n}var Se={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":ee?173:189,"=":ee?61:187,";":ee?59:186,"'":222,"[":219,"]":221,"\\":220},k={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},$e={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},m={16:!1,18:!1,17:!1,91:!1},g={};for(V=1;V<20;V++)Se["f".concat(V)]=111+V;var V,h=[],Pe="all",Ke=[],R=function(e){return Se[e.toLowerCase()]||k[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function Ie(s){Pe=s||"all"}function D(){return Pe||"all"}function It(){return h.slice(0)}function _t(s){var e=s.target||s.srcElement,t=e.tagName,i=!0;return(e.isContentEditable||(t==="INPUT"||t==="TEXTAREA"||t==="SELECT")&&!e.readOnly)&&(i=!1),i}function Rt(s){return typeof s=="string"&&(s=R(s)),h.indexOf(s)!==-1}function Ut(s,e){var t,i;s||(s=D());for(var n in g)if(Object.prototype.hasOwnProperty.call(g,n))for(t=g[n],i=0;i<t.length;)t[i].scope===s?t.splice(i,1):i++;D()===s&&Ie(e||"all")}function zt(s){var e=s.keyCode||s.which||s.charCode,t=h.indexOf(e);if(t>=0&&h.splice(t,1),s.key&&s.key.toLowerCase()==="meta"&&h.splice(0,h.length),(e===93||e===224)&&(e=91),e in m){m[e]=!1;for(var i in k)k[i]===e&&(A[i]=!1)}}function qt(s){if(!s)Object.keys(g).forEach(function(o){return delete g[o]});else if(Array.isArray(s))s.forEach(function(o){o.key&&se(o)});else if(typeof s=="object")s.key&&se(s);else if(typeof s=="string"){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var n=t[0],r=t[1];typeof n=="function"&&(r=n,n=""),se({key:s,scope:n,method:r,splitKey:"+"})}}var se=function(e){var t=e.key,i=e.scope,n=e.method,r=e.splitKey,o=r===void 0?"+":r,a=De(t);a.forEach(function(c){var f=c.split(o),d=f.length,l=f[d-1],y=l==="*"?"*":R(l);if(!!g[y]){i||(i=D());var p=d>1?Ve(k,f):[];g[y]=g[y].map(function(v){var S=n?v.method===n:!0;return S&&v.scope===i&&Kt(v.mods,p)?{}:v})}})};function _e(s,e,t){var i;if(e.scope===t||e.scope==="all"){i=e.mods.length>0;for(var n in m)Object.prototype.hasOwnProperty.call(m,n)&&(!m[n]&&e.mods.indexOf(+n)>-1||m[n]&&e.mods.indexOf(+n)===-1)&&(i=!1);(e.mods.length===0&&!m[16]&&!m[18]&&!m[17]&&!m[91]||i||e.shortcut==="*")&&e.method(s,e)===!1&&(s.preventDefault?s.preventDefault():s.returnValue=!1,s.stopPropagation&&s.stopPropagation(),s.cancelBubble&&(s.cancelBubble=!0))}}function Re(s){var e=g["*"],t=s.keyCode||s.which||s.charCode;if(!!A.filter.call(this,s)){if((t===93||t===224)&&(t=91),h.indexOf(t)===-1&&t!==229&&h.push(t),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(p){var v=$e[p];s[p]&&h.indexOf(v)===-1?h.push(v):!s[p]&&h.indexOf(v)>-1?h.splice(h.indexOf(v),1):p==="metaKey"&&s[p]&&h.length===3&&(s.ctrlKey||s.shiftKey||s.altKey||(h=h.slice(h.indexOf(v))))}),t in m){m[t]=!0;for(var i in k)k[i]===t&&(A[i]=!0);if(!e)return}for(var n in m)Object.prototype.hasOwnProperty.call(m,n)&&(m[n]=s[$e[n]]);s.getModifierState&&!(s.altKey&&!s.ctrlKey)&&s.getModifierState("AltGraph")&&(h.indexOf(17)===-1&&h.push(17),h.indexOf(18)===-1&&h.push(18),m[17]=!0,m[18]=!0);var r=D();if(e)for(var o=0;o<e.length;o++)e[o].scope===r&&(s.type==="keydown"&&e[o].keydown||s.type==="keyup"&&e[o].keyup)&&_e(s,e[o],r);if(t in g){for(var a=0;a<g[t].length;a++)if((s.type==="keydown"&&g[t][a].keydown||s.type==="keyup"&&g[t][a].keyup)&&g[t][a].key){for(var c=g[t][a],f=c.splitKey,d=c.key.split(f),l=[],y=0;y<d.length;y++)l.push(R(d[y]));l.sort().join("")===h.sort().join("")&&_e(s,c,r)}}}}function Wt(s){return Ke.indexOf(s)>-1}function A(s,e,t){h=[];var i=De(s),n=[],r="all",o=document,a=0,c=!1,f=!0,d="+";for(t===void 0&&typeof e=="function"&&(t=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(r=e.scope),e.element&&(o=e.element),e.keyup&&(c=e.keyup),e.keydown!==void 0&&(f=e.keydown),typeof e.splitKey=="string"&&(d=e.splitKey)),typeof e=="string"&&(r=e);a<i.length;a++)s=i[a].split(d),n=[],s.length>1&&(n=Ve(k,s)),s=s[s.length-1],s=s==="*"?"*":R(s),s in g||(g[s]=[]),g[s].push({keyup:c,keydown:f,scope:r,mods:n,shortcut:i[a],method:t,key:i[a],splitKey:d});typeof o!="undefined"&&!Wt(o)&&window&&(Ke.push(o),te(o,"keydown",function(l){Re(l)}),te(window,"focus",function(){h=[]}),te(o,"keyup",function(l){Re(l),zt(l)}))}var ie={setScope:Ie,getScope:D,deleteScope:Ut,getPressedKeyCodes:It,isPressed:Rt,filter:_t,unbind:qt};for(U in ie)Object.prototype.hasOwnProperty.call(ie,U)&&(A[U]=ie[U]);var U;typeof window!="undefined"&&(Ue=window.hotkeys,A.noConflict=function(s){return s&&window.hotkeys===A&&(window.hotkeys=Ue),A},window.hotkeys=A);var Ue;var Ht=(s,e,t)=>{let i=s;return t===!0?i=`${e.identifier}:${s}`:typeof t=="string"&&(i=`${t}:${s}`),i},Qt=(s,e,t)=>{let{bubbles:i,cancelable:n,composed:r}=e||{bubbles:!0,cancelable:!0,composed:!0};return e&&Object.assign(t,{originalEvent:e}),new CustomEvent(s,{bubbles:i,cancelable:n,composed:r,detail:t})};function Jt(s){let e=s.getBoundingClientRect(),t=window.innerHeight||document.documentElement.clientHeight,i=window.innerWidth||document.documentElement.clientWidth,n=e.top<=t&&e.top+e.height>=0,r=e.left<=i&&e.left+e.width>=0;return n&&r}var Gt={events:["click","touchend"],onlyVisible:!0,dispatchEvent:!0,eventPrefix:!0},ze=(s,e={})=>{let{onlyVisible:t,dispatchEvent:i,events:n,eventPrefix:r}=Object.assign({},Gt,e),o=d=>{let l=(e==null?void 0:e.element)||s.element;if(!(l.contains(d.target)||!Jt(l)&&t)&&(s.clickOutside&&s.clickOutside(d),i)){let y=Ht("click:outside",s,r),p=Qt(y,d,{controller:s});l.dispatchEvent(p)}},a=()=>{n==null||n.forEach(d=>{window.addEventListener(d,o,!1)})},c=()=>{n==null||n.forEach(d=>{window.removeEventListener(d,o,!1)})},f=s.disconnect.bind(s);return Object.assign(s,{disconnect(){c(),f()}}),a(),[a,c]};var qe=class extends w{};qe.debounces=[];var We=class extends w{};We.throttles=[];var Xt={enterFromClass:"enter",enterActiveClass:"enterStart",enterToClass:"enterEnd",leaveFromClass:"leave",leaveActiveClass:"leaveStart",leaveToClass:"leaveEnd"},Zt={transitioned:!1,hiddenClass:"hidden",preserveOriginalClass:!0,removeToClasses:!0},z=(s,e={})=>{var t,i,n;let r=s.element.dataset.transitionTarget,o;r&&(o=s[`${r}Target`]);let a=(e==null?void 0:e.element)||o||s.element;if(!(a instanceof HTMLElement||a instanceof SVGElement))return;let c=a.dataset,f=parseInt(c.leaveAfter||"")||e.leaveAfter||0,{transitioned:d,hiddenClass:l,preserveOriginalClass:y,removeToClasses:p}=Object.assign(Zt,e),v=(t=s.enter)===null||t===void 0?void 0:t.bind(s),S=(i=s.leave)===null||i===void 0?void 0:i.bind(s),ne=(n=s.toggleTransition)===null||n===void 0?void 0:n.bind(s);function $(u){return O(this,null,function*(){if(s.transitioned)return;s.transitioned=!0,v&&v(u);let b=T("enterFrom",e,c),C=T("enterActive",e,c),x=T("enterTo",e,c),L=T("leaveTo",e,c);l&&a.classList.remove(l),p||M(a,L),yield oe(a,b,C,x,l,y,p),f>0&&setTimeout(()=>{N(u)},f)})}function N(u){return O(this,null,function*(){if(!s.transitioned)return;s.transitioned=!1,S&&S(u);let b=T("leaveFrom",e,c),C=T("leaveActive",e,c),x=T("leaveTo",e,c),L=T("enterTo",e,c);p||M(a,L),yield oe(a,b,C,x,l,y,p),l&&a.classList.add(l)})}function re(u){ne&&ne(u),s.transitioned?N():$()}function oe(u,b,C,x,L,Qe,Je){return O(this,null,function*(){let F=[];Qe&&(b.forEach(E=>u.classList.contains(E)&&E!==L&&F.push(E)),C.forEach(E=>u.classList.contains(E)&&E!==L&&F.push(E)),x.forEach(E=>u.classList.contains(E)&&E!==L&&F.push(E))),P(u,b),M(u,F),P(u,C),yield es(),M(u,b),P(u,x),yield Yt(u),M(u,C),Je&&M(u,x),P(u,F)})}function He(){s.transitioned=d,d?(l&&a.classList.remove(l),$()):(l&&a.classList.add(l),N())}function P(u,b){b.length>0&&u.classList.add(...b)}function M(u,b){b.length>0&&u.classList.remove(...b)}return He(),Object.assign(s,{enter:$,leave:N,toggleTransition:re}),[$,N,re]};function T(s,e,t){let i=`transition${s[0].toUpperCase()}${s.substr(1)}`,n=Xt[s],r=e[s]||t[i]||t[n]||" ";return ts(r)?[]:r.split(" ")}function Yt(s){return O(this,null,function*(){return new Promise(e=>{let t=Number(getComputedStyle(s).transitionDuration.split(",")[0].replace("s",""))*1e3;setTimeout(()=>{e(t)},t)})})}function es(){return O(this,null,function*(){return new Promise(s=>{requestAnimationFrame(()=>{requestAnimationFrame(s)})})})}function ts(s){return s.length===0||!s.trim()}var q=class extends w{connect(){ze(this),z(this,{element:this.menuTarget})}clickOutside(){this.menuTarget.classList.contains("hidden")||this.toggleTransition()}};K(q,"targets",["menu"]);var W=class extends w{connect(){z(this,{element:this.modalTarget})}contact(){this.clearAlert(),this.formTarget.reportValidity()?this.submitForm():this.validationAlertTarget.classList.remove("hidden")}submitForm(){let s={name:this.formTarget.elements[0].value,email:this.formTarget.elements[1].value,company:this.formTarget.elements[2].value,message:this.formTarget.elements[3].value},e=new Headers;e.append("Access-Control-Request-Headers","Accept, Content-Type"),e.append("Access-Control-Request-Method","POST"),e.append("Accept","application/json"),e.append("Content-Type","application/json");let t={method:"POST",headers:e,body:JSON.stringify(s)};this.submitTarget.setAttribute("disabled",!0),fetch("https://aoorora.com/contact",t).then(i=>{i.status===202?(this.formTarget.reset(),this.clearAlert(),this.contactTarget.classList.add("hidden"),this.confirmationTarget.classList.remove("hidden")):i.status===422&&this.errorAlertTarget.classList.remove("hidden"),this.submitTarget.removeAttribute("disabled")}).catch(()=>{this.errorAlertTarget.classList.remove("hidden"),this.submitTarget.removeAttribute("disabled")})}clearAlert(){this.validationAlertTarget.classList.contains("hidden")||this.validationAlertTarget.classList.add("hidden"),this.errorAlertTarget.classList.contains("hidden")||this.errorAlertTarget.classList.add("hidden")}open(s){s.preventDefault(),this.configureAnimation(this.overlayTarget,!0),this.element.classList.toggle("overflow-hidden"),this.containerTarget.classList.toggle("hidden"),this.overlayTarget.classList.toggle("hidden"),this.animate(this.overlayTarget,!0),this.enter()}close(s){s.preventDefault(),this.configureAnimation(this.overlayTarget,!1),this.leave(),this.animate(this.overlayTarget,!1),this.overlayTarget.classList.toggle("hidden"),this.containerTarget.classList.toggle("hidden"),this.element.classList.toggle("overflow-hidden"),this.formTarget.reset(),this.clearAlert(),this.contactTarget.classList.remove("hidden"),this.confirmationTarget.classList.add("hidden")}animate(s,e){let t=s.dataset.transitionEnterTo,i=s.dataset.transitionLeaveTo;e?(s.classList.remove(i),s.classList.add(t)):(s.classList.remove(t),s.classList.add(i))}configureAnimation(s,e){let t=s.dataset.transitionEnter.split(" "),i=s.dataset.transitionEnterActive.split(" "),n=s.dataset.transitionLeave.split(" "),r=s.dataset.transitionLeaveActive.split(" ");e?(s.classList.remove(...n),s.classList.remove(...r),s.classList.add(...t),s.classList.add(...i)):(s.classList.remove(...t),s.classList.remove(...i),s.classList.add(...n),s.classList.add(...r))}};K(W,"targets",["overlay","modal","container","form","validationAlert","errorAlert","submit","confirmation","contact"]);j.register("menu",q);j.register("modal",W);})();
/*!
 * hotkeys-js v3.8.7
 * A simple micro-library for defining and dispatching keyboard shortcuts. It has no dependencies.
 * 
 * Copyright (c) 2021 kenny wong <wowohoo@qq.com>
 * http://jaywcjlove.github.io/hotkeys
 * 
 * Licensed under the MIT license.
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
//# sourceMappingURL=/assets/index.NIIQPZEK.js.map
